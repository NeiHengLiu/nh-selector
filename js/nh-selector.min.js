/**
 * ===========================================
 *  下拉选择器  nh-selector
 * ===========================================
 */
!function(e){function d(a,b){this.$element=a;this.$window=e(window);this.$body=e("body");this.$selector=e('\x3cdiv class\x3d"nh-selector"\x3e\x3c/div\x3e');this.locationData={};this.callData=[];this.options=e.extend({},{data:[],autoHeight:!1,callback:function(){}},b)}d.prototype={init:function(){var a=this;a.initLocationData();a.setDomPosition();a.bind(a.$element,"click",function(){a.dataProcessing(a.options.data);a.show();console.log(a.options.data)});return a.$element},initLocationData:function(){this.locationData={window:{width:this.$window.outerWidth(!0),height:this.$window.outerHeight(!0)},dom:this.$element[0].getBoundingClientRect()}},dataProcessing:function(a){for(var b=this,c=e('\x3cul class\x3d"nh-selector-menu"\x3e\x3c/ul\x3e'),d=a.length,f=0;f<d;f++)!function(d){d=e('\x3cli class\x3d"nh-selector-menu__item"\x3e'+a[d].label+"\x3c/li\x3e");b.bind(d,"click",function(){var d=e(this),c=d.index(),f=d.parent().index();d.parent().nextAll().remove();void 0!==a[c].children?(b.callData[f]=b.dataScreening(a[c]),b.dataProcessing(a[c].children)):(b.callData[f]=b.dataScreening(a[c]),b.options.callback(b.callData))});c.append(d)}(f);return c},dataScreening:function(a){var b={},c;for(c in a)"children"!==c&&(b[c]=a[c]);return b},setDomPosition:function(){this.$selector.css({position:"absolute",top:this.locationData.dom.bottom+"px",left:this.locationData.dom.left+"px"})},bind:function(a,b,c){e(a).off().on(b,c)},unbind:function(a){e(a).off()},show:function(){0<e(".nh-selector").length||this.$body.append(this.$selector);this.$selector.show()}};e.fn.nhSelector=function(a){return(new d(this,a)).init()}}(jQuery);